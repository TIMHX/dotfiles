# å¼€å¯é¼ æ ‡æ”¯æŒ (ç‚¹å‡»åˆ‡æ¢çª—å£ã€è°ƒæ•´åˆ†å±å¤§å°ã€æ»šåŠ¨æ—¥å¿—)
set -g mouse on

# 2. é…ç½®å³é”®èœå•ï¼šæ˜¾ç¤ºèœå• + å±é™©æ“ä½œäºŒæ¬¡ç¡®è®¤
# MouseDown3Pane ä»£è¡¨åœ¨é¢æ¿ä¸Šç‚¹å‡»å³é”®
unbind -n MouseDown3Pane
bind-key -n MouseDown3Pane menu -T "#[align=centre] î¯ˆ Tmux å¿«æ·èœå• " \
    "ó°Š“ å…¨å±/æ¢å¤å½“å‰é¢æ¿"    z "resize-pane -Z" \
    "ó°¤ æ°´å¹³åˆ†å± (ä¸Šä¸‹)"      - "split-window -v -c '#{pane_current_path}'" \
    "ó°£ å‚ç›´åˆ†å± (å·¦å³)"      | "split-window -h -c '#{pane_current_path}'" \
    "" \
    "ó°…– å…³é—­å½“å‰é¢æ¿"         x "confirm-before -p \"ç¡®å®šè¦å…³é—­å½“å‰é¢æ¿å—? (y/n)\" kill-pane" \
    "ó°—¨ å…³é—­å…¶ä»–æ‰€æœ‰é¢æ¿"     o "confirm-before -p \"ç¡®å®šè¦æ€æ­»å…¶ä»–æ‰€æœ‰é¢æ¿å—? (y/n)\" 'kill-pane -a'" \
    "" \
    "ó°œº é€€å‡ºèœå•"             q ""

# è®¾ç½®å†å²é™åˆ¶ (è®©ä½ èƒ½å¾€ä¸Šç¿»æ›´å¤šçš„æ—¥å¿—)
set -g history-limit 50000

# è§£å†³åˆ†å±åè·¯å¾„ä¸ä¸€è‡´çš„é—®é¢˜ (ä¿æŒåœ¨å½“å‰ç›®å½•)
bind '"' split-window -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"

# è§£å†³ VS Code é‡Œçš„é¢œè‰²æ˜¾ç¤ºé—®é¢˜
set -g default-terminal "screen-256color"
set-option -ga terminal-overrides ",xterm-256color:Tc"

# 5. è‡ªåŠ¨é‡æ–°ç¼–å·çª—å£ (å…³æ‰ä¸€ä¸ªçª—å£åï¼Œå‰©ä¸‹çš„ä¼šè‡ªåŠ¨æ’å¥½)
set -g renumber-windows on

# --- å¿«æ·é”®å‰ç¼€ä¿®æ”¹ ---
# å–æ¶ˆé»˜è®¤çš„ Ctrl + b
unbind C-b

# è®¾ç½®æ–°çš„å‰ç¼€é”®ä¸º Ctrl + a
set -g prefix C-a

# ç¡®ä¿æŒ‰ä¸¤æ¬¡ Ctrl + a å¯ä»¥å‘é€ç»™ç»ˆç«¯ç¨‹åºï¼ˆæ¯”å¦‚åœ¨å‘½ä»¤è¡Œé‡Œè·³åˆ°è¡Œé¦–ï¼‰
bind C-a send-prefix

# --- é¢æ¿ç®¡ç†å¿«æ·é”®ä¼˜åŒ– (æ›´ç›´è§‚) ---
# ç”¨ - è¿›è¡Œæ°´å¹³åˆ†å± (æ›´åƒå‡å·æ¨ªç€åˆ‡)
# ç”¨ | è¿›è¡Œå‚ç›´åˆ†å± (æ›´åƒç«–ç€åˆ‡)
bind | split-window -h
bind - split-window -v
unbind '"'
unbind '%'

# è¿™é‡Œçš„ export PATH åŒ…å«äº† Homebrew å’Œ fzf çš„è·¯å¾„ï¼Œç¡®ä¿æ‰€æœ‰å­å‘½ä»¤éƒ½èƒ½è·‘é€š
bind-key "f" run-shell "export PATH=\$PATH:/home/linuxbrew/.linuxbrew/bin:/home/xing/.fzf/bin; sesh connect \"\$(
  sesh list --icons | fzf-tmux -p 80%,70% \
    --no-sort --ansi --border-label ' sesh ' --prompt 'âš¡  ' \
    --header '  ^a all ^t tmux ^g configs ^x zoxide ^d kill ^f find' \
    --bind 'tab:down,btab:up' \
    --bind 'ctrl-a:change-prompt(âš¡  )+reload(sesh list --icons)' \
    --bind 'ctrl-t:change-prompt(ğŸªŸ  )+reload(sesh list -t --icons)' \
    --bind 'ctrl-g:change-prompt(âš™ï¸  )+reload(sesh list -c --icons)' \
    --bind 'ctrl-x:change-prompt(ğŸ“  )+reload(sesh list -z --icons)' \
    --bind 'ctrl-s:change-prompt(ğŸ”  )+reload(fd -H -d 2 -t d -E .Trash . ~)' \
    --bind 'ctrl-d:execute(tmux kill-session -t {2..})+change-prompt(âš¡  )+reload(sesh list --icons)' \
    --preview-window 'right:55%' \
    --preview 'export PATH=\$PATH:/home/linuxbrew/.linuxbrew/bin; sesh preview {}'
)\""
